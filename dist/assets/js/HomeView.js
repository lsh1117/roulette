import{d as D,_ as N,r as m,c as s,o as E,a as b,b as f,e as A,t as H,f as X,g as C}from"./index.js";const Y=D("marketStore",{state:()=>({markets:[{name:"오군(순두부)",category:"kr"},{name:"동원(감자탕)",category:"kr"},{name:"오징어풍경",category:"kr"},{name:"나주곰탕",category:"kr"},{name:"이화수육개장",category:"kr"},{name:"오는정(생선구이)",category:"kr"},{name:"뼈해장국",category:"kr"},{name:"오봉집",category:"kr"},{name:"고려보쌈",category:"kr"},{name:"부산아지매국밥",category:"kr"},{name:"오마이포(쌀국수)",category:"vn"},{name:"알돈",category:"jp"},{name:"가쯔야",category:"jp"},{name:"원흥",category:"cn"},{name:"용호동낙지",category:"kr"},{name:"당대일품",category:"cn"},{name:"사이공",category:"vn"}],categoryColors:{kr:"#D94F30",cn:"#FF5733",en:"#cba315",jp:"#3F72AF",th:"#C70039",vn:"#C70039",bun:"#FF8FAB",fast:"#C70039"},categoryImages:{kr:"ico_flag_kr.png",cn:"ico_flag_cn.png",en:"ico_flag_en.png",jp:"ico_flag_jp.png",th:"ico_flag_th.png",vn:"ico_flag_vn.png",bun:"ico_flag_kr.png",fast:"ico_flag_kr.png"}}),actions:{setMarkets(h){this.markets=h},getMarkets(){return this.markets}}}),$={class:"roulette-container"},q=["disabled"],z={key:0,class:"result"},O={__name:"HomeView",setup(h){const d=Y(),v=m(null),r=m(!1),c=m(null),y=m(0),l=s(()=>d.markets),p=s(()=>l.value.length),g=s(()=>2*Math.PI/p.value),S=s(()=>d.categoryColors);s(()=>d.categoryImages);const M=a=>Promise.all(a.value.map(t=>new Promise(e=>{const n=new Image;n.src=`./assets/images/ico_flag_${t.category}.png`,n.onload=()=>e({category:t.category,img:n})}))),w=async()=>{const a=v.value;if(!a)return;const t=await M(l),e=a.getContext("2d"),n=a.width/2,i=a.height/2,o=n;e.clearRect(0,0,a.width,a.height),l.value.forEach((_,R)=>{const u=R*g.value,j=u+g.value;e.beginPath(),e.moveTo(n,i),e.arc(n,i,o,u,j),e.closePath();const P=_.category,T=S.value[P]||"#ccc",x=t.find(k=>k.category===_.category);if(x){e.save(),e.globalAlpha=.5;const k=e.createPattern(x.img,"repeat");e.fillStyle=k,e.fill(),e.stroke(),e.restore()}else e.fillStyle=T,e.fill(),e.stroke();e.globalAlpha=1,e.fillStyle="white",e.font="16px Arial",e.textAlign="center",e.textBaseline="middle";const B=n+Math.cos(u+g.value/2)*(o*.7),V=i+Math.sin(u+g.value/2)*(o*.7);e.fillText(_.name,B,V)})},F=()=>{if(r.value)return;r.value=!0,c.value=null;let a=Math.random()*10+20;const t=5e3,e=Date.now(),n=()=>{Date.now()-e<t?(a*=.98,y.value+=a,requestAnimationFrame(n)):I(),w();const o=v.value;o.style.transform=`rotate(${y.value}deg)`};n()},I=()=>{const a=y.value%360/360,t=Math.floor(p.value-a*p.value);c.value=l.value[t].name,r.value=!1};return E(()=>{w()}),(a,t)=>(C(),b("div",$,[f("canvas",{ref_key:"canvasRef",ref:v,width:"500",height:"500",class:"roulette"},null,512),t[2]||(t[2]=f("div",{class:"arrow"},null,-1)),f("button",{onClick:F,disabled:r.value},"START",8,q),c.value?(C(),b("p",z,[t[0]||(t[0]=A("오늘의 점심은 ")),f("strong",null,H(c.value),1),t[1]||(t[1]=A("!"))])):X("",!0)]))}},J=N(O,[["__scopeId","data-v-68ca9359"]]);export{J as default};
